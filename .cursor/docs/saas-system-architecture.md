# SAASå¹³å°ç³»ç»Ÿæ¶æ„è®¾è®¡

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Presentation Layer                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   REST API  â”‚  â”‚  GraphQL    â”‚  â”‚ WebSocket   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Application Layer                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Use Cases  â”‚  â”‚ Commands    â”‚  â”‚   Queries   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Handlers   â”‚  â”‚ Validators  â”‚  â”‚ Projectionsâ”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Domain Layer                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Aggregates  â”‚  â”‚  Entities   â”‚  â”‚ Value Objs  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Domain Evt  â”‚  â”‚ Domain Svc  â”‚  â”‚ Repos Intf  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Infrastructure Layer                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ PostgreSQL  â”‚  â”‚  MongoDB    â”‚  â”‚    Redis    â”‚        â”‚
â”‚  â”‚ (Command DB)â”‚  â”‚ (Query DB)  â”‚  â”‚   (Cache)   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚Event Store  â”‚  â”‚Read Models  â”‚  â”‚ External Svcâ”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ­ æ ¸å¿ƒé¢†åŸŸæ¨¡å—åˆ’åˆ†

### 2.1 ç”¨æˆ·ç®¡ç†æ¨¡å—ï¼ˆUser Managementï¼‰

**èŒè´£èŒƒå›´**

- ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ç±»å‹çš„ç”¨æˆ·å®ä½“
- ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸç®¡ç†
- ç”¨æˆ·æ¡£æ¡ˆç®¡ç†
- ç”¨æˆ·å…³ç³»ç®¡ç†

**åŒ…å«çš„å­é¢†åŸŸ**

#### 2.1.1 å¹³å°ç”¨æˆ·ç®¡ç†ï¼ˆPlatform Usersï¼‰

- ç³»ç»Ÿç®¡ç†å‘˜ï¼ˆSystem Administratorï¼‰
- å¹³å°è¿è¥äººå‘˜ï¼ˆPlatform Operatorï¼‰
- æŠ€æœ¯æ”¯æŒäººå‘˜ï¼ˆTechnical Supportï¼‰
- è´¢åŠ¡ç®¡ç†å‘˜ï¼ˆFinance Administratorï¼‰
- åˆè§„ç®¡ç†å‘˜ï¼ˆCompliance Administratorï¼‰

#### 2.1.2 ç§Ÿæˆ·ç”¨æˆ·ç®¡ç†ï¼ˆTenant Usersï¼‰

- ç§Ÿæˆ·ç®¡ç†å‘˜ï¼ˆTenant Administratorï¼‰
- æ™®é€šç”¨æˆ·ï¼ˆRegular Userï¼‰
- éƒ¨é—¨ç”¨æˆ·ï¼ˆDepartment Userï¼‰
- ç»„ç»‡ç”¨æˆ·ï¼ˆOrganization Userï¼‰

#### 2.1.3 ç”¨æˆ·æ¡£æ¡ˆç®¡ç†

- åŸºæœ¬ä¿¡æ¯ç®¡ç†ï¼ˆå§“åã€é‚®ç®±ã€ç”µè¯ç­‰ï¼‰
- æ‰©å±•ä¿¡æ¯ç®¡ç†ï¼ˆå¤´åƒã€ä¸ªäººç®€ä»‹ç­‰ï¼‰
- åå¥½è®¾ç½®ç®¡ç†ï¼ˆè¯­è¨€ã€æ—¶åŒºã€é€šçŸ¥ç­‰ï¼‰
- éšç§è®¾ç½®ç®¡ç†ï¼ˆæ•°æ®å¯è§æ€§ã€åˆ†äº«æƒé™ç­‰ï¼‰

#### 2.1.4 ç”¨æˆ·å…³ç³»ç®¡ç†

- ç”¨æˆ·ä¸ç§Ÿæˆ·çš„å…³ç³»
- ç”¨æˆ·ä¸ç»„ç»‡çš„å…³ç³»
- ç”¨æˆ·ä¸éƒ¨é—¨çš„å…³ç³»
- ç”¨æˆ·ä¸è§’è‰²çš„å…³ç³»

**æŠ€æœ¯ç‰¹ç‚¹**

- æ”¯æŒå¤šç§Ÿæˆ·æ¶æ„
- æ”¯æŒå¤šå±‚çº§æ•°æ®éš”ç¦»
- æ”¯æŒç”¨æˆ·çŠ¶æ€ç®¡ç†
- æ”¯æŒç”¨æˆ·å…³ç³»ç®¡ç†

### 2.2 å¹³å°ç®¡ç†æ¨¡å—ï¼ˆPlatform Managementï¼‰

**èŒè´£èŒƒå›´**

- å¹³å°çº§é…ç½®ç®¡ç†
- å¹³å°çº§ç³»ç»Ÿè®¾ç½®
- å¹³å°çº§åŠŸèƒ½å¼€å…³
- å¹³å°çº§å®‰å…¨ç­–ç•¥
- å¹³å°çº§ç­–ç•¥ç®¡ç†

**åŒ…å«çš„å­é¢†åŸŸ**

#### 2.2.1 å¹³å°é…ç½®ç®¡ç†

- ç³»ç»Ÿé…ç½®ï¼ˆSystem Configurationï¼‰
- åŠŸèƒ½å¼€å…³ï¼ˆFeature Flagsï¼‰
- å…¨å±€å‚æ•°ï¼ˆGlobal Parametersï¼‰
- ç¯å¢ƒé…ç½®ï¼ˆEnvironment Configurationï¼‰

#### 2.2.2 å¹³å°ç­–ç•¥ç®¡ç†

- å®‰å…¨ç­–ç•¥ï¼ˆSecurity Policyï¼‰
- åˆè§„ç­–ç•¥ï¼ˆCompliance Policyï¼‰
- è¿è¥ç­–ç•¥ï¼ˆOperation Policyï¼‰
- æŠ€æœ¯ç­–ç•¥ï¼ˆTechnical Policyï¼‰

#### 2.2.3 å¹³å°ç›‘æ§ç®¡ç†

- ç³»ç»Ÿç›‘æ§ï¼ˆSystem Monitoringï¼‰
- æ€§èƒ½ç›‘æ§ï¼ˆPerformance Monitoringï¼‰
- å®‰å…¨ç›‘æ§ï¼ˆSecurity Monitoringï¼‰
- ä¸šåŠ¡ç›‘æ§ï¼ˆBusiness Monitoringï¼‰

**æŠ€æœ¯ç‰¹ç‚¹**

- é…ç½®çƒ­æ›´æ–°
- ç­–ç•¥ç‰ˆæœ¬ç®¡ç†
- é…ç½®å®¡è®¡è¿½è¸ª
- å¤šç¯å¢ƒæ”¯æŒ

### 2.3 ç§Ÿæˆ·ç®¡ç†æ¨¡å—ï¼ˆTenant Managementï¼‰

**èŒè´£èŒƒå›´**

- ç§Ÿæˆ·ç”Ÿå‘½å‘¨æœŸç®¡ç†
- ç§Ÿæˆ·é…ç½®ç®¡ç†
- ç§Ÿæˆ·éš”ç¦»ç­–ç•¥
- ç§Ÿæˆ·è®¡è´¹ç®¡ç†
- ç§Ÿæˆ·ç­–ç•¥ç®¡ç†

**åŒ…å«çš„å­é¢†åŸŸ**

#### 2.3.1 ç§Ÿæˆ·ç”Ÿå‘½å‘¨æœŸç®¡ç†

- ç§Ÿæˆ·åˆ›å»ºï¼ˆTenant Creationï¼‰
- ç§Ÿæˆ·æ¿€æ´»ï¼ˆTenant Activationï¼‰
- ç§Ÿæˆ·æš‚åœï¼ˆTenant Suspensionï¼‰
- ç§Ÿæˆ·ç»ˆæ­¢ï¼ˆTenant Terminationï¼‰

#### 2.3.2 ç§Ÿæˆ·é…ç½®ç®¡ç†

- ç§Ÿæˆ·é…ç½®ï¼ˆTenant Configurationï¼‰
- ç§Ÿæˆ·è®¾ç½®ï¼ˆTenant Settingsï¼‰
- ç§Ÿæˆ·ç­–ç•¥ï¼ˆTenant Policyï¼‰
- ç§Ÿæˆ·é™åˆ¶ï¼ˆTenant Limitsï¼‰

#### 2.3.3 ç§Ÿæˆ·è®¡è´¹ç®¡ç†

- è®¡è´¹è®¡åˆ’ï¼ˆBilling Plansï¼‰
- ä½¿ç”¨é‡ç»Ÿè®¡ï¼ˆUsage Statisticsï¼‰
- è´¹ç”¨è®¡ç®—ï¼ˆCost Calculationï¼‰
- æ”¯ä»˜ç®¡ç†ï¼ˆPayment Managementï¼‰

**æŠ€æœ¯ç‰¹ç‚¹**

- å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»
- ç§Ÿæˆ·çº§é…ç½®ç®¡ç†
- è®¡è´¹é›†æˆæ”¯æŒ
- ç§Ÿæˆ·çº§ç›‘æ§

### 2.4 ç»„ç»‡ç®¡ç†æ¨¡å—ï¼ˆOrganization Managementï¼‰

**èŒè´£èŒƒå›´**

- ç»„ç»‡æ¶æ„ç®¡ç†
- ç»„ç»‡å…³ç³»ç®¡ç†
- ç»„ç»‡é…ç½®ç®¡ç†
- ç»„ç»‡ç­–ç•¥ç®¡ç†

**åŒ…å«çš„å­é¢†åŸŸ**

#### 2.4.1 ç»„ç»‡æ¶æ„ç®¡ç†

- ç»„ç»‡åˆ›å»ºï¼ˆOrganization Creationï¼‰
- ç»„ç»‡å±‚çº§ï¼ˆOrganization Hierarchyï¼‰
- ç»„ç»‡å…³ç³»ï¼ˆOrganization Relationshipsï¼‰
- ç»„ç»‡çŠ¶æ€ï¼ˆOrganization Statusï¼‰

#### 2.4.2 ç»„ç»‡é…ç½®ç®¡ç†

- ç»„ç»‡é…ç½®ï¼ˆOrganization Configurationï¼‰
- ç»„ç»‡è®¾ç½®ï¼ˆOrganization Settingsï¼‰
- ç»„ç»‡ç­–ç•¥ï¼ˆOrganization Policyï¼‰
- ç»„ç»‡é™åˆ¶ï¼ˆOrganization Limitsï¼‰

#### 2.4.3 ç»„ç»‡å…³ç³»ç®¡ç†

- ç»„ç»‡ä¸ç§Ÿæˆ·çš„å…³ç³»
- ç»„ç»‡ä¸éƒ¨é—¨çš„å…³ç³»
- ç»„ç»‡ä¸ç”¨æˆ·çš„å…³ç³»
- ç»„ç»‡é—´çš„å…³ç³»

**æŠ€æœ¯ç‰¹ç‚¹**

- æ”¯æŒå¤æ‚ç»„ç»‡æ¶æ„
- ç»„ç»‡çº§æ•°æ®éš”ç¦»
- ç»„ç»‡çº§æƒé™æ§åˆ¶
- ç»„ç»‡çº§é…ç½®ç®¡ç†

### 2.5 éƒ¨é—¨ç®¡ç†æ¨¡å—ï¼ˆDepartment Managementï¼‰

**èŒè´£èŒƒå›´**

- éƒ¨é—¨æ¶æ„ç®¡ç†
- éƒ¨é—¨å…³ç³»ç®¡ç†
- éƒ¨é—¨é…ç½®ç®¡ç†
- éƒ¨é—¨ç­–ç•¥ç®¡ç†

**åŒ…å«çš„å­é¢†åŸŸ**

#### 2.5.1 éƒ¨é—¨æ¶æ„ç®¡ç†

- éƒ¨é—¨åˆ›å»ºï¼ˆDepartment Creationï¼‰
- éƒ¨é—¨å±‚çº§ï¼ˆDepartment Hierarchyï¼‰
- éƒ¨é—¨å…³ç³»ï¼ˆDepartment Relationshipsï¼‰
- éƒ¨é—¨çŠ¶æ€ï¼ˆDepartment Statusï¼‰

#### 2.5.2 éƒ¨é—¨é…ç½®ç®¡ç†

- éƒ¨é—¨é…ç½®ï¼ˆDepartment Configurationï¼‰
- éƒ¨é—¨è®¾ç½®ï¼ˆDepartment Settingsï¼‰
- éƒ¨é—¨ç­–ç•¥ï¼ˆDepartment Policyï¼‰
- éƒ¨é—¨é™åˆ¶ï¼ˆDepartment Limitsï¼‰

#### 2.5.3 éƒ¨é—¨å…³ç³»ç®¡ç†

- éƒ¨é—¨ä¸ç»„ç»‡çš„å…³ç³»
- éƒ¨é—¨ä¸ç”¨æˆ·çš„å…³ç³»
- éƒ¨é—¨é—´çš„å…³ç³»
- éƒ¨é—¨ä¸ç§Ÿæˆ·çš„å…³ç³»

**æŠ€æœ¯ç‰¹ç‚¹**

- æ”¯æŒå¤æ‚éƒ¨é—¨æ¶æ„
- éƒ¨é—¨çº§æ•°æ®éš”ç¦»
- éƒ¨é—¨çº§æƒé™æ§åˆ¶
- éƒ¨é—¨çº§é…ç½®ç®¡ç†

### 2.6 IAMæ¨¡å—ï¼ˆIdentity & Access Managementï¼‰

**èŒè´£èŒƒå›´**

- èº«ä»½è®¤è¯ï¼ˆAuthenticationï¼‰
- æˆæƒç®¡ç†ï¼ˆAuthorizationï¼‰
- è§’è‰²ç®¡ç†ï¼ˆRole Managementï¼‰
- æƒé™ç®¡ç†ï¼ˆPermission Managementï¼‰
- ä¼šè¯ç®¡ç†ï¼ˆSession Managementï¼‰
- å®¡è®¡æ—¥å¿—ï¼ˆAudit Loggingï¼‰

**åŒ…å«çš„å­é¢†åŸŸ**

#### 2.6.1 èº«ä»½è®¤è¯ï¼ˆAuthenticationï¼‰

- ç”¨æˆ·åå¯†ç è®¤è¯
- å¤šå› å­è®¤è¯ï¼ˆMFAï¼‰
- å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰
- OAuth2.0/OIDC
- ç”Ÿç‰©è¯†åˆ«è®¤è¯

#### 2.6.2 æˆæƒç®¡ç†ï¼ˆAuthorizationï¼‰

- åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰
- åŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼ˆABACï¼‰
- åŸºäºç­–ç•¥çš„è®¿é—®æ§åˆ¶ï¼ˆPBACï¼‰
- åŠ¨æ€æƒé™æ§åˆ¶

#### 2.6.3 è§’è‰²ç®¡ç†ï¼ˆRole Managementï¼‰

- è§’è‰²å®šä¹‰ï¼ˆRole Definitionï¼‰
- è§’è‰²åˆ†é…ï¼ˆRole Assignmentï¼‰
- è§’è‰²ç»§æ‰¿ï¼ˆRole Inheritanceï¼‰
- è§’è‰²ç»„åˆï¼ˆRole Compositionï¼‰

#### 2.6.4 æƒé™ç®¡ç†ï¼ˆPermission Managementï¼‰

- æƒé™å®šä¹‰ï¼ˆPermission Definitionï¼‰
- æƒé™åˆ†é…ï¼ˆPermission Assignmentï¼‰
- æƒé™éªŒè¯ï¼ˆPermission Validationï¼‰
- æƒé™å®¡è®¡ï¼ˆPermission Auditï¼‰

#### 2.6.5 ä¼šè¯ç®¡ç†ï¼ˆSession Managementï¼‰

- ä¼šè¯åˆ›å»ºï¼ˆSession Creationï¼‰
- ä¼šè¯ç»´æŠ¤ï¼ˆSession Maintenanceï¼‰
- ä¼šè¯éªŒè¯ï¼ˆSession Validationï¼‰
- ä¼šè¯ç»ˆæ­¢ï¼ˆSession Terminationï¼‰

#### 2.6.6 å®¡è®¡æ—¥å¿—ï¼ˆAudit Loggingï¼‰

- è®¤è¯æ—¥å¿—ï¼ˆAuthentication Logsï¼‰
- æˆæƒæ—¥å¿—ï¼ˆAuthorization Logsï¼‰
- æ“ä½œæ—¥å¿—ï¼ˆOperation Logsï¼‰
- å®‰å…¨æ—¥å¿—ï¼ˆSecurity Logsï¼‰

**æŠ€æœ¯ç‰¹ç‚¹**

- æ”¯æŒå¤šç§è®¤è¯æ–¹å¼
- çµæ´»çš„æƒé™æ§åˆ¶
- å®Œæ•´çš„å®¡è®¡è¿½è¸ª
- é«˜æ€§èƒ½çš„æƒé™éªŒè¯

## ğŸ“ ç›®å½•ç»“æ„è®¾è®¡åŸåˆ™

éµå¾ªé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰æ€æƒ³ï¼Œä»£ç ç›®å½•æ¶æ„åº”å½“é¦–å…ˆä½“ç°é¢†åŸŸçš„è¾¹ç•Œã€‚SAASå¹³å°å°†å¹³å°ã€ç§Ÿæˆ·ã€ç»„ç»‡ã€éƒ¨é—¨ã€ç”¨æˆ·ã€è®¤è¯æˆæƒç­‰é¢†åŸŸä½œä¸ºæ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒæ—¶å°†ä¾§é‡äºä¸šåŠ¡é¢†åŸŸçš„å¹³å°ã€ç§Ÿæˆ·ã€ç»„ç»‡ã€éƒ¨é—¨ã€ç”¨æˆ·ä¸è®¤è¯æˆæƒåˆ†ç¦»ï¼Œç¡®ä¿èŒè´£æ¸…æ™°ã€‚

### è®¾è®¡åŸåˆ™è¯¦è§£

**æ ¸å¿ƒåŸåˆ™**ï¼š

- **æ ¸å¿ƒåŠŸèƒ½ä¼˜å…ˆ**ï¼šSAASå¹³å°å°†å¹³å°ã€ç§Ÿæˆ·ã€ç»„ç»‡ã€éƒ¨é—¨ã€ç”¨æˆ·ã€è®¤è¯æˆæƒç­‰é¢†åŸŸä½œä¸ºæ ¸å¿ƒåŠŸèƒ½
- **ä¸šåŠ¡ä¸è®¤è¯åˆ†ç¦»**ï¼šå°†ä¾§é‡äºä¸šåŠ¡é¢†åŸŸçš„å¹³å°ã€ç§Ÿæˆ·ã€ç»„ç»‡ã€éƒ¨é—¨ã€ç”¨æˆ·ä¸è®¤è¯æˆæƒåˆ†ç¦»
- **å…±äº«æ¨¡å—ç»Ÿä¸€**ï¼šç»Ÿä¸€å¼€å‘ç»´æŠ¤ä¸€ä¸ªå…±äº«æ¨¡å—ï¼Œå„é¢†åŸŸæ¨¡å—å†…ä¸è®¾ç½®å…±äº«é¢†åŸŸå±‚
- **åŸºç¡€è®¾æ–½ç‹¬ç«‹**ï¼šé…ç½®ã€æ—¥å¿—ã€ç¼“å­˜ã€æ•°æ®åº“ç­‰é€šç”¨åŸºç¡€è®¾æ–½ç‹¬ç«‹å¼€å‘ï¼Œä¾›å„é¢†åŸŸæ¨¡å—ç»Ÿä¸€è°ƒç”¨
- **åˆ†å±‚æ¶æ„å…¶æ¬¡**ï¼šåœ¨æ¯ä¸ªæ¨¡å—å†…éƒ¨å†æŒ‰åˆ†å±‚æ¶æ„ç»„ç»‡
- **åŠŸèƒ½ç»„ä»¶æœ€å**ï¼šåœ¨æ¯å±‚å†…éƒ¨æŒ‰åŠŸèƒ½ç»„ä»¶ç»„ç»‡

**å‘½åè§„èŒƒ**ï¼š

- **æ ¸å¿ƒä¸šåŠ¡æ¨¡å—**ï¼šä»¥ä¸šåŠ¡é¢†åŸŸåç§°å‘½åï¼ˆå¦‚ï¼šplatformã€tenantã€userã€organizationã€departmentï¼‰
- **è®¤è¯æˆæƒæ¨¡å—**ï¼šä»¥æœåŠ¡ç±»å‹å‘½åï¼ˆå¦‚ï¼šiamï¼‰
- **å…±äº«æ¨¡å—**ï¼šä»¥å…±äº«åŠŸèƒ½å‘½åï¼ˆå¦‚ï¼šsharedï¼‰ï¼Œç»Ÿä¸€ç»´æŠ¤ï¼Œå„é¢†åŸŸæ¨¡å—ä¸é‡å¤åˆ›å»º
- **åŸºç¡€è®¾æ–½æ¨¡å—**ï¼šä»¥åŠŸèƒ½ç±»å‹å‘½åï¼ˆå¦‚ï¼šconfigã€loggingã€cacheã€databaseã€notificationï¼‰ï¼Œç‹¬ç«‹å¼€å‘ï¼Œç»Ÿä¸€è°ƒç”¨
- **åˆ†å±‚ç›®å½•**ï¼šä»¥æ¶æ„å±‚åç§°å‘½åï¼ˆå¦‚ï¼šdomainã€applicationã€infrastructureã€presentationï¼‰
- **åŠŸèƒ½ç»„ä»¶**ï¼šä»¥åŠŸèƒ½ç»„ä»¶åç§°å‘½åï¼ˆå¦‚ï¼šentitiesã€use-casesã€controllersã€repositoriesï¼‰

**ä¼˜åŠ¿**ï¼š

1. **æ ¸å¿ƒåŠŸèƒ½å†…èš**ï¼šå¹³å°ã€ç§Ÿæˆ·ã€ç»„ç»‡ã€éƒ¨é—¨ã€ç”¨æˆ·ã€è®¤è¯æˆæƒç­‰æ ¸å¿ƒåŠŸèƒ½å„è‡ªå†…èš
2. **èŒè´£è¾¹ç•Œæ¸…æ™°**ï¼šä¸šåŠ¡ç®¡ç†æ¨¡å—è´Ÿè´£ä¸šåŠ¡é€»è¾‘ï¼ŒIAM æ¨¡å—è´Ÿè´£è®¤è¯æˆæƒ
3. **å…±äº«æ¨¡å—ç»Ÿä¸€**ï¼šé¿å…é‡å¤å¼€å‘ï¼Œç»Ÿä¸€ç»´æŠ¤å…±äº«åŠŸèƒ½ï¼Œæé«˜ä»£ç å¤ç”¨æ€§
4. **åŸºç¡€è®¾æ–½ç‹¬ç«‹**ï¼šé€šç”¨åŸºç¡€è®¾æ–½ç‹¬ç«‹å¼€å‘ï¼Œä¾¿äºç»Ÿä¸€å‡çº§å’Œç»´æŠ¤
5. **å¯ç»´æŠ¤æ€§**ï¼šä¿®æ”¹æŸä¸ªé¢†åŸŸæ—¶å½±å“èŒƒå›´å¯æ§
6. **å¯æ‰©å±•æ€§**ï¼šæ–°å¢é¢†åŸŸæ—¶ç»“æ„æ¸…æ™°
7. **å›¢é˜Ÿåä½œ**ï¼šä¸åŒå›¢é˜Ÿå¯ä»¥ä¸“æ³¨ä¸åŒé¢†åŸŸ

### ç›®å½•ç»“æ„ç¤ºä¾‹

```
libs/core/                    # æ ¸å¿ƒä¸šåŠ¡æ¨¡å—
â”œâ”€â”€ platform/                 # å¹³å°ç®¡ç†æ¨¡å—ï¼ˆæ ¸å¿ƒä¸šåŠ¡é¢†åŸŸï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ domain/          # é¢†åŸŸå±‚
â”‚   â”‚   â”œâ”€â”€ application/     # åº”ç”¨å±‚
â”‚   â”‚   â”œâ”€â”€ infrastructure/  # åŸºç¡€è®¾æ–½å±‚
â”‚   â”‚   â””â”€â”€ presentation/    # è¡¨ç°å±‚
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”œâ”€â”€ tenant/                   # ç§Ÿæˆ·ç®¡ç†æ¨¡å—ï¼ˆæ ¸å¿ƒä¸šåŠ¡é¢†åŸŸï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ domain/          # é¢†åŸŸå±‚
â”‚   â”‚   â”œâ”€â”€ application/     # åº”ç”¨å±‚
â”‚   â”‚   â”œâ”€â”€ infrastructure/  # åŸºç¡€è®¾æ–½å±‚
â”‚   â”‚   â””â”€â”€ presentation/    # è¡¨ç°å±‚
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”œâ”€â”€ user/                     # ç”¨æˆ·ç®¡ç†æ¨¡å—ï¼ˆæ ¸å¿ƒä¸šåŠ¡é¢†åŸŸï¼Œç»Ÿä¸€ç®¡ç†å¹³å°ç”¨æˆ·+ç§Ÿæˆ·ç”¨æˆ·ï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ domain/          # é¢†åŸŸå±‚
â”‚   â”‚   â”œâ”€â”€ application/     # åº”ç”¨å±‚
â”‚   â”‚   â”œâ”€â”€ infrastructure/  # åŸºç¡€è®¾æ–½å±‚
â”‚   â”‚   â””â”€â”€ presentation/    # è¡¨ç°å±‚
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”œâ”€â”€ organization/             # ç»„ç»‡ç®¡ç†æ¨¡å—ï¼ˆæ ¸å¿ƒä¸šåŠ¡é¢†åŸŸï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ domain/          # é¢†åŸŸå±‚
â”‚   â”‚   â”œâ”€â”€ application/     # åº”ç”¨å±‚
â”‚   â”‚   â”œâ”€â”€ infrastructure/  # åŸºç¡€è®¾æ–½å±‚
â”‚   â”‚   â””â”€â”€ presentation/    # è¡¨ç°å±‚
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”œâ”€â”€ department/               # éƒ¨é—¨ç®¡ç†æ¨¡å—ï¼ˆæ ¸å¿ƒä¸šåŠ¡é¢†åŸŸï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ domain/          # é¢†åŸŸå±‚
â”‚   â”‚   â”œâ”€â”€ application/     # åº”ç”¨å±‚
â”‚   â”‚   â”œâ”€â”€ infrastructure/  # åŸºç¡€è®¾æ–½å±‚
â”‚   â”‚   â””â”€â”€ presentation/    # è¡¨ç°å±‚
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â””â”€â”€ iam/                      # èº«ä»½è®¤è¯ä¸æˆæƒç®¡ç†æ¨¡å—ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼Œä¸ä¸šåŠ¡é¢†åŸŸåˆ†ç¦»ï¼‰
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ auth/            # è®¤è¯å­é¢†åŸŸ
    â”‚   â”‚   â”œâ”€â”€ domain/      # é¢†åŸŸå±‚
    â”‚   â”‚   â”œâ”€â”€ application/ # åº”ç”¨å±‚
    â”‚   â”‚   â”œâ”€â”€ infrastructure/# åŸºç¡€è®¾æ–½å±‚
    â”‚   â”‚   â””â”€â”€ presentation/# è¡¨ç°å±‚
    â”‚   â”œâ”€â”€ role/            # è§’è‰²å­é¢†åŸŸ
    â”‚   â”‚   â”œâ”€â”€ domain/      # é¢†åŸŸå±‚
    â”‚   â”‚   â”œâ”€â”€ application/ # åº”ç”¨å±‚
    â”‚   â”‚   â”œâ”€â”€ infrastructure/# åŸºç¡€è®¾æ–½å±‚
    â”‚   â”‚   â””â”€â”€ presentation/# è¡¨ç°å±‚
    â”‚   â”œâ”€â”€ permission/      # æƒé™å­é¢†åŸŸ
    â”‚   â”‚   â”œâ”€â”€ domain/      # é¢†åŸŸå±‚
    â”‚   â”‚   â”œâ”€â”€ application/ # åº”ç”¨å±‚
    â”‚   â”‚   â”œâ”€â”€ infrastructure/# åŸºç¡€è®¾æ–½å±‚
    â”‚   â”‚   â””â”€â”€ presentation/# è¡¨ç°å±‚
    â”‚   â”œâ”€â”€ session/         # ä¼šè¯å­é¢†åŸŸ
    â”‚   â”‚   â”œâ”€â”€ domain/      # é¢†åŸŸå±‚
    â”‚   â”‚   â”œâ”€â”€ application/ # åº”ç”¨å±‚
    â”‚   â”‚   â”œâ”€â”€ infrastructure/# åŸºç¡€è®¾æ–½å±‚
    â”‚   â”‚   â””â”€â”€ presentation/# è¡¨ç°å±‚
    â”‚   â””â”€â”€ audit/           # å®¡è®¡å­é¢†åŸŸ
    â”‚       â”œâ”€â”€ domain/      # é¢†åŸŸå±‚
    â”‚       â”œâ”€â”€ application/ # åº”ç”¨å±‚
    â”‚       â”œâ”€â”€ infrastructure/# åŸºç¡€è®¾æ–½å±‚
    â”‚       â””â”€â”€ presentation/# è¡¨ç°å±‚
    â”œâ”€â”€ package.json
    â””â”€â”€ tsconfig.json

libs/shared/                  # å…±äº«åŸºç¡€è®¾æ–½æ¨¡å—
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ domain/              # å…±äº«é¢†åŸŸç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ entities/        # åŸºç¡€å®ä½“ç±»
â”‚   â”‚   â”œâ”€â”€ value-objects/   # é€šç”¨å€¼å¯¹è±¡
â”‚   â”‚   â””â”€â”€ enums/           # é€šç”¨æšä¸¾
â”‚   â”œâ”€â”€ infrastructure/      # å…±äº«åŸºç¡€è®¾æ–½
â”‚   â””â”€â”€ presentation/        # å…±äº«è¡¨ç°å±‚ç»„ä»¶
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json

libs/infrastructure/          # é€šç”¨åŸºç¡€è®¾æ–½æ¨¡å—
â”œâ”€â”€ config/                   # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ database/        # æ•°æ®åº“é…ç½®
â”‚   â”‚   â”œâ”€â”€ redis/           # Redisé…ç½®
â”‚   â”‚   â”œâ”€â”€ jwt/             # JWTé…ç½®
â”‚   â”‚   â””â”€â”€ app/             # åº”ç”¨é…ç½®
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”œâ”€â”€ logging/                  # æ—¥å¿—ç®¡ç†
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ formatters/      # æ—¥å¿—æ ¼å¼åŒ–
â”‚   â”‚   â”œâ”€â”€ transports/      # æ—¥å¿—ä¼ è¾“
â”‚   â”‚   â””â”€â”€ levels/          # æ—¥å¿—çº§åˆ«
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”œâ”€â”€ cache/                    # ç¼“å­˜ç®¡ç†
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ redis/           # Redisç¼“å­˜
â”‚   â”‚   â”œâ”€â”€ memory/          # å†…å­˜ç¼“å­˜
â”‚   â”‚   â””â”€â”€ strategies/      # ç¼“å­˜ç­–ç•¥
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â””â”€â”€ database/                 # æ•°æ®åº“ç®¡ç†
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ postgresql/      # PostgreSQLè¿æ¥
    â”‚   â”œâ”€â”€ mongodb/         # MongoDBè¿æ¥
    â”‚   â”œâ”€â”€ migrations/      # æ•°æ®åº“è¿ç§»
    â”‚   â””â”€â”€ seeds/           # æ•°æ®ç§å­
    â”œâ”€â”€ package.json
    â””â”€â”€ tsconfig.json

libs/notification/            # é€šçŸ¥é¢†åŸŸæ¨¡å—
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ domain/              # é¢†åŸŸå±‚
â”‚   â”‚   â”œâ”€â”€ entities/        # é€šçŸ¥å®ä½“
â”‚   â”‚   â”œâ”€â”€ value-objects/   # é€šçŸ¥å€¼å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ aggregates/      # é€šçŸ¥èšåˆæ ¹
â”‚   â”‚   â”œâ”€â”€ domain-events/   # é€šçŸ¥é¢†åŸŸäº‹ä»¶
â”‚   â”‚   â”œâ”€â”€ domain-services/ # é€šçŸ¥é¢†åŸŸæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ repositories/    # é€šçŸ¥ä»“å‚¨æ¥å£
â”‚   â”‚   â”œâ”€â”€ exceptions/      # é€šçŸ¥å¼‚å¸¸
â”‚   â”‚   â”œâ”€â”€ enums/           # é€šçŸ¥æšä¸¾
â”‚   â”‚   â””â”€â”€ types/           # é€šçŸ¥ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ application/         # åº”ç”¨å±‚
â”‚   â”‚   â”œâ”€â”€ use-cases/       # é€šçŸ¥ç”¨ä¾‹
â”‚   â”‚   â”œâ”€â”€ commands/        # é€šçŸ¥å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ queries/         # é€šçŸ¥æŸ¥è¯¢
â”‚   â”‚   â”œâ”€â”€ projections/     # é€šçŸ¥æŠ•å½±
â”‚   â”‚   â”œâ”€â”€ services/        # é€šçŸ¥åº”ç”¨æœåŠ¡
â”‚   â”‚   â””â”€â”€ interfaces/      # é€šçŸ¥åº”ç”¨å±‚æ¥å£
â”‚   â”œâ”€â”€ infrastructure/      # åŸºç¡€è®¾æ–½å±‚
â”‚   â”‚   â”œâ”€â”€ repositories/    # é€šçŸ¥ä»“å‚¨å®ç°
â”‚   â”‚   â”œâ”€â”€ mappers/         # é€šçŸ¥æ˜ å°„å™¨
â”‚   â”‚   â”œâ”€â”€ entities/        # é€šçŸ¥ORMå®ä½“
â”‚   â”‚   â”œâ”€â”€ services/        # é€šçŸ¥åŸºç¡€è®¾æ–½æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ external/        # å¤–éƒ¨é€šçŸ¥æœåŠ¡é›†æˆ
â”‚   â”‚   â”œâ”€â”€ config/          # é€šçŸ¥é…ç½®
â”‚   â”‚   â””â”€â”€ migrations/      # é€šçŸ¥æ•°æ®åº“è¿ç§»
â”‚   â””â”€â”€ presentation/        # è¡¨ç°å±‚
â”‚       â”œâ”€â”€ controllers/     # é€šçŸ¥æ§åˆ¶å™¨
â”‚       â”œâ”€â”€ dtos/            # é€šçŸ¥æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚       â”œâ”€â”€ validators/      # é€šçŸ¥éªŒè¯å™¨
â”‚       â”œâ”€â”€ guards/          # é€šçŸ¥æƒé™å®ˆå«
â”‚       â””â”€â”€ interceptors/    # é€šçŸ¥æ‹¦æˆªå™¨
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

### åº”ç”¨ç¤ºä¾‹

**æ­£ç¡®ç¤ºä¾‹**ï¼š

- âœ… `libs/core/iam/src/auth/infrastructure/jwt.service.ts` - IAMè®¤è¯å­é¢†åŸŸçš„åŸºç¡€è®¾æ–½æœåŠ¡
- âœ… `libs/core/platform/src/domain/entities/platform-config.entity.ts` - å¹³å°ç®¡ç†æ¨¡å—çš„é¢†åŸŸå®ä½“
- âœ… `libs/core/tenant/src/domain/entities/tenant.entity.ts` - ç§Ÿæˆ·ç®¡ç†æ¨¡å—çš„é¢†åŸŸå®ä½“
- âœ… `libs/core/user/src/domain/entities/user.entity.ts` - ç”¨æˆ·ç®¡ç†æ¨¡å—çš„é¢†åŸŸå®ä½“
- âœ… `libs/core/iam/src/role/application/use-cases/create-role.usecase.ts` - IAMè§’è‰²å­é¢†åŸŸçš„åº”ç”¨ç”¨ä¾‹
- âœ… `libs/infrastructure/config/src/database/database.config.ts` - é€šç”¨æ•°æ®åº“é…ç½®æœåŠ¡
- âœ… `libs/infrastructure/logging/src/formatters/json.formatter.ts` - é€šç”¨æ—¥å¿—æ ¼å¼åŒ–æœåŠ¡
- âœ… `libs/infrastructure/cache/src/redis/redis.cache.service.ts` - é€šç”¨Redisç¼“å­˜æœåŠ¡
- âœ… `libs/notification/src/domain/entities/notification.entity.ts` - é€šçŸ¥é¢†åŸŸå®ä½“
- âœ… `libs/notification/src/application/use-cases/send-notification.usecase.ts` - é€šçŸ¥å‘é€ç”¨ä¾‹
- âœ… `libs/shared/src/domain/value-objects/uuid.vo.ts` - å…±äº«UUIDå€¼å¯¹è±¡

**é”™è¯¯ç¤ºä¾‹**ï¼š

- âŒ `libs/core/iam/src/infrastructure/auth/jwt.service.ts` - æŒ‰åˆ†å±‚æ¶æ„ç»„ç»‡ï¼Œä¸ç¬¦åˆDDDåŸåˆ™
- âŒ `libs/core/iam/src/domain/user/user.entity.ts` - ç”¨æˆ·å®ä½“ä¸åº”æ”¾åœ¨IAMæ¨¡å—ä¸­
- âŒ `libs/core/iam/src/platform/domain/entities/platform-user.entity.ts` - å¹³å°ç”¨æˆ·å®ä½“ä¸åº”æ”¾åœ¨IAMæ¨¡å—ä¸­
- âŒ `libs/core/platform/src/shared/domain/value-objects/uuid.vo.ts` - å„é¢†åŸŸæ¨¡å—ä¸åº”åˆ›å»ºå…±äº«é¢†åŸŸå±‚
- âŒ `libs/core/user/src/infrastructure/database/database.service.ts` - å„é¢†åŸŸæ¨¡å—ä¸åº”é‡å¤å¼€å‘åŸºç¡€è®¾æ–½æœåŠ¡
- âŒ `libs/core/tenant/src/shared/utils/logging.util.ts` - å„é¢†åŸŸæ¨¡å—ä¸åº”é‡å¤å¼€å‘é€šç”¨å·¥å…·
- âŒ `libs/core/user/src/domain/entities/notification.entity.ts` - é€šçŸ¥å®ä½“ä¸åº”æ”¾åœ¨ç”¨æˆ·æ¨¡å—ä¸­
- âŒ `libs/core/platform/src/application/use-cases/send-notification.usecase.ts` - é€šçŸ¥ç”¨ä¾‹ä¸åº”æ”¾åœ¨å¹³å°æ¨¡å—ä¸­

## ğŸ”— æ¨¡å—åˆ’åˆ†

```
libs/
â”œâ”€â”€ shared/                   # å…±äº«æ¨¡å—
â”‚   â”œâ”€â”€ domain/               # å…±äº«é¢†åŸŸæ¨¡å‹
â”‚   â”œâ”€â”€ infrastructure/       # å…±äº«åŸºç¡€è®¾æ–½
â”‚   â””â”€â”€ utils/                # å·¥å…·ç±»
â”œâ”€â”€ notification/             # é€šçŸ¥é¢†åŸŸæ¨¡å—ï¼ˆç‹¬ç«‹å¼€å‘ï¼Œä¾›å„é¢†åŸŸæ¨¡å—ç»Ÿä¸€ä½¿ç”¨ï¼‰
â”œâ”€â”€ core/                     # æ ¸å¿ƒä¸šåŠ¡æ¨¡å—
â”‚   â”œâ”€â”€ platform/             # å¹³å°ç®¡ç†æ¨¡å—ï¼ˆæ ¸å¿ƒä¸šåŠ¡é¢†åŸŸï¼‰
â”‚   â”œâ”€â”€ tenant/               # ç§Ÿæˆ·ç®¡ç†æ¨¡å—ï¼ˆæ ¸å¿ƒä¸šåŠ¡é¢†åŸŸï¼‰
â”‚   â”œâ”€â”€ user/                 # ç”¨æˆ·ç®¡ç†æ¨¡å—ï¼ˆæ ¸å¿ƒä¸šåŠ¡é¢†åŸŸï¼‰
â”‚   â”œâ”€â”€ organization/         # ç»„ç»‡ç®¡ç†æ¨¡å—ï¼ˆæ ¸å¿ƒä¸šåŠ¡é¢†åŸŸï¼‰
â”‚   â”œâ”€â”€ department/           # éƒ¨é—¨ç®¡ç†æ¨¡å—ï¼ˆæ ¸å¿ƒä¸šåŠ¡é¢†åŸŸï¼‰
â”‚   â””â”€â”€ iam/                  # èº«ä»½è®¤è¯ä¸æˆæƒç®¡ç†æ¨¡å—ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼Œä¸ä¸šåŠ¡é¢†åŸŸåˆ†ç¦»ï¼‰
â”‚       â”œâ”€â”€ auth/             # è®¤è¯å­é¢†åŸŸ
â”‚       â”œâ”€â”€ role/             # è§’è‰²å­é¢†åŸŸ
â”‚       â”œâ”€â”€ permission/       # æƒé™å­é¢†åŸŸ
â”‚       â”œâ”€â”€ session/          # ä¼šè¯å­é¢†åŸŸ
â”‚       â””â”€â”€ audit/            # å®¡è®¡å­é¢†åŸŸ
```

## ğŸ”„ æ¨¡å—ä¾èµ–å…³ç³»

### 3.1 ä¾èµ–å…³ç³»å›¾

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚           Business Modules           â”‚
                    â”‚           (ä¸šåŠ¡æ¨¡å—å±‚)               â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                    â”‚  â”‚   HR Mgmt   â”‚  â”‚ Finance Mgmtâ”‚  â”‚
                    â”‚  â”‚ (äººåŠ›èµ„æº)   â”‚  â”‚ (è´¢åŠ¡ç®¡ç†)   â”‚  â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User Mgmt     â”‚    â”‚  Platform Mgmt  â”‚    â”‚  Tenant Mgmt    â”‚
â”‚   (ç”¨æˆ·ç®¡ç†)     â”‚    â”‚   (å¹³å°ç®¡ç†)     â”‚    â”‚   (ç§Ÿæˆ·ç®¡ç†)     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚   IAM   â”‚   â”‚    â”‚   â”‚   IAM   â”‚   â”‚    â”‚   â”‚   IAM   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Organization   â”‚    â”‚     Shared      â”‚    â”‚      IAM       â”‚
â”‚     Mgmt        â”‚    â”‚   (å…±äº«æ¨¡å—)     â”‚    â”‚ (èº«ä»½è®¤è¯æˆæƒ)   â”‚
â”‚   (ç»„ç»‡ç®¡ç†)     â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚   â”‚   IAM   â”‚   â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚                 â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â–¼                       â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚                       â”‚
â”‚  Department     â”‚              â”‚                       â”‚
â”‚     Mgmt        â”‚              â”‚                       â”‚
â”‚   (éƒ¨é—¨ç®¡ç†)     â”‚              â”‚                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚                       â”‚
â”‚   â”‚   IAM   â”‚   â”‚              â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚         Infrastructure Layer        â”‚
                    â”‚           (åŸºç¡€è®¾æ–½å±‚)               â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                    â”‚  â”‚ PostgreSQL  â”‚  â”‚   Redis     â”‚  â”‚
                    â”‚  â”‚   MongoDB   â”‚  â”‚             â”‚  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ä¾èµ–å…³ç³»è¯´æ˜

**åŸºç¡€ä¾èµ–**

- **Sharedæ¨¡å—**ï¼šæ‰€æœ‰æ¨¡å—éƒ½ä¾èµ–çš„å…±äº«åŸºç¡€è®¾æ–½ï¼ˆå€¼å¯¹è±¡ã€åŸºç±»ã€å·¥å…·ç­‰ï¼‰
- **IAMæ¨¡å—**ï¼šæä¾›è®¤è¯æˆæƒæœåŠ¡ï¼Œè¢«æ‰€æœ‰ç®¡ç†æ¨¡å—ä½¿ç”¨

**æ ¸å¿ƒç®¡ç†æ¨¡å—ä¾èµ–**

- **User Management**ï¼šä¾èµ–Sharedæ¨¡å—å’ŒIAMæ¨¡å—ï¼Œä¸“æ³¨äºç”¨æˆ·å®ä½“ç®¡ç†
- **Platform Management**ï¼šä¾èµ–Sharedæ¨¡å—å’ŒIAMæ¨¡å—ï¼Œç®¡ç†å¹³å°çº§é…ç½®
- **Tenant Management**ï¼šä¾èµ–Sharedæ¨¡å—å’ŒIAMæ¨¡å—ï¼Œç®¡ç†ç§Ÿæˆ·å®ä½“å’Œç”Ÿå‘½å‘¨æœŸ
- **Organization Management**ï¼šä¾èµ–Sharedæ¨¡å—ã€IAMæ¨¡å—å’ŒTenant Managementï¼Œç®¡ç†ç»„ç»‡æ¶æ„
- **Department Management**ï¼šä¾èµ–Sharedæ¨¡å—ã€IAMæ¨¡å—å’ŒOrganization Managementï¼Œç®¡ç†éƒ¨é—¨æ¶æ„

**ä¸šåŠ¡æ¨¡å—ä¾èµ–**

- **Business Modules**ï¼šä¸šåŠ¡æ¨¡å—ï¼ˆå¦‚HRã€Financeã€Orderç­‰ï¼‰ä¾èµ–æ‰€æœ‰åŸºç¡€ç®¡ç†æ¨¡å—
- **Infrastructure Layer**ï¼šåŸºç¡€è®¾æ–½å±‚è¢«æ‰€æœ‰ä¸Šå±‚æ¨¡å—ä½¿ç”¨

### 3.3 ä¾èµ–å…³ç³»è®¾è®¡åŸåˆ™

**å®ä½“å…³ç³»ç®¡ç†åŸåˆ™**

- **å±‚çº§å…³ç³»**ï¼šç§Ÿæˆ· â†’ ç»„ç»‡ â†’ éƒ¨é—¨ï¼Œå½¢æˆæ¸…æ™°çš„å±‚çº§ç»“æ„
- **åŒ…å«å…³ç³»**ï¼šä¸Šçº§å®ä½“åŒ…å«ä¸‹çº§å®ä½“ï¼Œä¸‹çº§å®ä½“å±äºä¸Šçº§å®ä½“
- **å…³ç³»ç»´æŠ¤**ï¼šæ¯ä¸ªç®¡ç†æ¨¡å—è´Ÿè´£ç»´æŠ¤è‡ªå·±å®ä½“ä¸å…¶ä»–å®ä½“çš„å…³ç³»

**è®¤è¯æˆæƒç®¡ç†åŸåˆ™**

- **ç»Ÿä¸€è®¤è¯**ï¼šæ‰€æœ‰ç®¡ç†æ¨¡å—éƒ½ç›´æ¥ä¾èµ–IAMæ¨¡å—è¿›è¡Œè®¤è¯æˆæƒ
- **æƒé™æ§åˆ¶**ï¼šæ¯ä¸ªç®¡ç†æ¨¡å—éƒ½æœ‰è‡ªå·±çš„æƒé™æ§åˆ¶éœ€æ±‚
- **æœåŠ¡å¤ç”¨**ï¼šIAMæ¨¡å—ä½œä¸ºå…¬å…±æœåŠ¡ï¼Œè¢«æ‰€æœ‰æ¨¡å—å¤ç”¨

**æ¨¡å—èŒè´£åˆ†ç¦»åŸåˆ™**

- **ç”¨æˆ·ç®¡ç†**ï¼šä¸“æ³¨äºç”¨æˆ·å®ä½“ã€ç”¨æˆ·æ¡£æ¡ˆã€ç”¨æˆ·è®¤è¯æˆæƒ
- **ç»„ç»‡ç®¡ç†**ï¼šä¸“æ³¨äºç»„ç»‡æ¶æ„ã€ç»„ç»‡å…³ç³»ã€ç”¨æˆ·ä¸ç»„ç»‡çš„å…³ç³»
- **éƒ¨é—¨ç®¡ç†**ï¼šä¸“æ³¨äºéƒ¨é—¨æ¶æ„ã€éƒ¨é—¨å…³ç³»ã€ç”¨æˆ·ä¸éƒ¨é—¨çš„å…³ç³»
- **ç§Ÿæˆ·ç®¡ç†**ï¼šä¸“æ³¨äºç§Ÿæˆ·ç”Ÿå‘½å‘¨æœŸã€ç§Ÿæˆ·é…ç½®ã€ç”¨æˆ·ä¸ç§Ÿæˆ·çš„å…³ç³»

## ğŸ“‹ å­é¢†åŸŸèŒè´£åˆ’åˆ†

**æ³¨æ„**: ä»¥ä¸‹ä¸šåŠ¡é¢†åŸŸå·²ç‹¬ç«‹ä¸ºç‹¬ç«‹æ¨¡å—ï¼Œä¸IAMåŒçº§ï¼Œä½œä¸ºSAASå¹³å°çš„æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½ï¼š

- Platform Management (å¹³å°ç®¡ç†) - `libs/core/platform`
- Tenant Management (ç§Ÿæˆ·ç®¡ç†) - `libs/core/tenant`
- User Management (ç”¨æˆ·ç®¡ç†) - `libs/core/user`
- Organization Management (ç»„ç»‡ç®¡ç†) - `libs/core/organization`
- Department Management (éƒ¨é—¨ç®¡ç†) - `libs/core/department`

**IAMæ¨¡å—ä¸“æ³¨äºè®¤è¯æˆæƒåŠŸèƒ½ï¼Œä¸ä¸šåŠ¡é¢†åŸŸåˆ†ç¦»ï¼ŒåŒ…å«ä»¥ä¸‹å­é¢†åŸŸï¼š**

#### 1. **auth å­é¢†åŸŸ**

- **èŒè´£**: èº«ä»½è®¤è¯ã€å¤šå› å­è®¤è¯ã€å•ç‚¹ç™»å½•
- **æ ¸å¿ƒåŠŸèƒ½**:
  - ç”¨æˆ·åå¯†ç è®¤è¯
  - å¤šå› å­è®¤è¯ï¼ˆTOTPã€çŸ­ä¿¡ã€é‚®ç®±ï¼‰
  - å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰
  - OAuth2.0/OIDCé›†æˆ
  - ç”Ÿç‰©è¯†åˆ«è®¤è¯
- **è¾¹ç•Œ**: ä¸“æ³¨äºè®¤è¯æµç¨‹å’Œè®¤è¯æ–¹å¼ï¼Œä¸æ¶‰åŠç”¨æˆ·æ•°æ®ç®¡ç†

#### 2. **role å­é¢†åŸŸ**

- **èŒè´£**: è§’è‰²å®šä¹‰ã€è§’è‰²åˆ†é…ã€è§’è‰²ç»§æ‰¿
- **æ ¸å¿ƒåŠŸèƒ½**:
  - è§’è‰²å®šä¹‰å’Œé…ç½®
  - è§’è‰²åˆ†é…å’Œæ’¤é”€
  - è§’è‰²ç»§æ‰¿å’Œç»„åˆ
  - ç³»ç»Ÿè§’è‰²å’Œä¸šåŠ¡è§’è‰²ç®¡ç†
  - è§’è‰²æƒé™å…³è”
- **è¾¹ç•Œ**: ä¸“æ³¨äºè§’è‰²å±‚é¢çš„ç®¡ç†ï¼Œä¸æ¶‰åŠå…·ä½“æƒé™å®ç°

#### 3. **permission å­é¢†åŸŸ**

- **èŒè´£**: æƒé™å®šä¹‰ã€æƒé™åˆ†é…ã€æƒé™éªŒè¯
- **æ ¸å¿ƒåŠŸèƒ½**:
  - æƒé™å®šä¹‰å’Œé…ç½®
  - æƒé™åˆ†é…å’Œæ’¤é”€
  - æƒé™éªŒè¯å’Œæ£€æŸ¥
  - åŠŸèƒ½æƒé™ã€æ•°æ®æƒé™ã€å­—æ®µæƒé™
  - æƒé™ç”³è¯·å’Œå®¡æ‰¹æµç¨‹
- **è¾¹ç•Œ**: ä¸“æ³¨äºæƒé™å±‚é¢çš„ç®¡ç†ï¼Œæä¾›æƒé™éªŒè¯æœåŠ¡

#### 4. **session å­é¢†åŸŸ**

- **èŒè´£**: ä¼šè¯ç®¡ç†ã€ä¼šè¯éªŒè¯ã€ä¼šè¯å®‰å…¨
- **æ ¸å¿ƒåŠŸèƒ½**:
  - ä¼šè¯åˆ›å»ºå’Œç»´æŠ¤
  - ä¼šè¯éªŒè¯å’Œåˆ·æ–°
  - ä¼šè¯å®‰å…¨ç­–ç•¥
  - å¤šè®¾å¤‡ä¼šè¯ç®¡ç†
  - ä¼šè¯å®¡è®¡å’Œç›‘æ§
  - ä¼šè¯è¶…æ—¶ç®¡ç†
  - å¹¶å‘ä¼šè¯æ§åˆ¶
- **è¾¹ç•Œ**: ä¸“æ³¨äºä¼šè¯å±‚é¢çš„ç®¡ç†ï¼Œç¡®ä¿ä¼šè¯å®‰å…¨

#### 5. **audit å­é¢†åŸŸ**

- **èŒè´£**: å®¡è®¡æ—¥å¿—ã€åˆè§„æ£€æŸ¥ã€å®‰å…¨ç›‘æ§
- **æ ¸å¿ƒåŠŸèƒ½**:
  - æ“ä½œæ—¥å¿—è®°å½•
  - å®¡è®¡æŠ¥å‘Šç”Ÿæˆ
  - åˆè§„æ£€æŸ¥æ”¯æŒ
  - å®‰å…¨äº‹ä»¶ç›‘æ§
  - æ•°æ®è®¿é—®è¿½è¸ª
- **è¾¹ç•Œ**: ä¸“æ³¨äºå®¡è®¡å±‚é¢çš„ç®¡ç†ï¼Œæä¾›å®Œæ•´çš„å®¡è®¡èƒ½åŠ›

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**åˆ›å»ºæ—¥æœŸ**: 2024-12-19  
**é€‚ç”¨èŒƒå›´**: SAASå¹³å°ç³»ç»Ÿæ¶æ„è®¾è®¡æŒ‡å¯¼
